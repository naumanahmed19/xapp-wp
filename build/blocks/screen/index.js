(()=>{var e={4184:(e,t)=>{var n;!function(){"use strict";var l={}.hasOwnProperty;function r(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var o=typeof n;if("string"===o||"number"===o)e.push(n);else if(Array.isArray(n)){if(n.length){var a=r.apply(null,n);a&&e.push(a)}}else if("object"===o){if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]")){e.push(n.toString());continue}for(var i in n)l.call(n,i)&&n[i]&&e.push(i)}}}return e.join(" ")}e.exports?(r.default=r,e.exports=r):void 0===(n=function(){return r}.apply(t,[]))||(e.exports=n)}()}},t={};function n(l){var r=t[l];if(void 0!==r)return r.exports;var o=t[l]={exports:{}};return e[l](o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var l in t)n.o(t,l)&&!n.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";const e=window.wp.element,t=window.wp.blockEditor,l=window.wp.blocks,r=window.wp.data;var o=n(4184),a=n.n(o);const i=window.wp.components,s=window.wp.i18n,c=window.wp.primitives,u=(0,e.createElement)(c.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,e.createElement)(c.Path,{d:"M15 4H9c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h6c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm.5 14c0 .3-.2.5-.5.5H9c-.3 0-.5-.2-.5-.5V6c0-.3.2-.5.5-.5h6c.3 0 .5.2.5.5v12zm-4.5-.5h2V16h-2v1.5z"}));(0,l.registerBlockType)("xapp/screen",{icon:(0,e.createElement)((function({icon:t,size:n=24,...l}){return(0,e.cloneElement)(t,{width:n,height:n,...l})}),{icon:u,width:20}),__experimentalLabel(e,{context:t}){if("list-view"===t&&e?.title)return e?.title},edit:function(n){const{attributes:l,setAttributes:o,clientId:c}=n,[u,d]=(0,e.useState)(!1),[p,m]=(0,e.useState)(null),[v,w]=(0,e.useState)("true"),[g,h]=(0,e.useState)(!1),f=()=>d(!0),{verticalAlignment:b,templateLock:E=!1,allowedBlocks:k,style:x,tabScreenIndex:S,scroll:B,title:y,screenId:_}=l,C=(0,t.__experimentalUseColorProps)(l),I=a()("block-core-columns",{[`is-vertically-aligned-${b}`]:b},B?"tab-screen":""),{columnsIds:P,hasChildBlocks:A,rootClientId:O}=((0,i.__experimentalUseCustomUnits)({availableUnits:(0,t.useSetting)("spacing.units")||["%","px","em","rem","vw"]}),(0,r.useSelect)((e=>{const{getBlockOrder:n,getBlockRootClientId:l}=e(t.store),r=l(c);return{hasChildBlocks:n(c).length>0,rootClientId:r,columnsIds:n(r)}}),[c])),{updateBlockAttributes:N}=(0,r.useDispatch)(t.store),$=(0,t.useBlockProps)({className:I,style:x,tabScreenIndex:S}),j=P.length,T=P.indexOf(c)+1,D=(0,s.sprintf)(/* translators: 1: Block label (i.e. "Block: Column"), 2: Position of the selected block, 3: Total number of sibling blocks of the same type */
(0,s.__)("%1$s (%2$d of %3$d)"),$["aria-label"],T,j),F=(0,t.useInnerBlocksProps)({...$,"aria-label":D,style:x},{templateLock:E,allowedBlocks:k,renderAppender:A?void 0:()=>(0,e.createElement)(t.InnerBlocks.ButtonBlockAppender,{className:"xapp-appender"})});return(0,e.useEffect)((()=>{_||o({screenId:blockId})}),[]),(0,e.useEffect)((()=>{if(!u)return;const e=wp.data.select("core/editor").getCurrentPostId(),t=window?.xapp?.siteUrl;let n=`${t}/wp-json/xapp/home?APP_POST_ID=${e}&screenId=${_}&preview=${v}`;h(!0),fetch(n).then((e=>e.json())).then((e=>{h(!1),m(e)}))}),[u]),(0,e.createElement)(e.Fragment,null,(0,e.createElement)(t.BlockControls,null,(0,e.createElement)(t.BlockVerticalAlignmentToolbar,{onChange:e=>{o({verticalAlignment:e}),N(O,{verticalAlignment:null})},value:b})),(0,e.createElement)(t.InspectorControls,null,(0,e.createElement)(i.PanelBody,{title:(0,s.__)("Screen settings")},(0,e.createElement)(i.TextControl,{label:(0,s.__)("Title","brand"),value:y,onChange:e=>{o({title:e})}}),(0,e.createElement)(i.TextControl,{label:(0,s.__)("Screen id","brand"),value:_,onChange:e=>{o({screenId:e})}}),(0,e.createElement)(i.ToggleControl,{label:(0,s.__)("Enable Scroll"),checked:B,onChange:e=>o({scroll:e})})),(0,e.createElement)(i.PanelBody,{title:(0,s.__)("Debug")},(0,e.createElement)(i.Button,{variant:"link",onClick:()=>{w("true"),f()}},"Preview Screen JSON Data"),(0,e.createElement)(i.Button,{variant:"link",onClick:()=>{w("false"),f()}},"Publish Screen JSON Data"),u&&(0,e.createElement)(i.Modal,{title:`${y} - Json`,onRequestClose:()=>d(!1)},g?(0,e.createElement)(i.Spinner,null):(0,e.createElement)(e.Fragment,null,(0,e.createElement)("code",null,(0,e.createElement)("pre",null,JSON.stringify(p,null,4)||"No data")))))),(0,e.createElement)("div",{style:{...C.style}},(0,e.createElement)("div",F)))},save:function({attributes:n}){const{verticalAlignment:l,width:r}=n,o=a()({[`is-vertically-aligned-${l}`]:l});let i;if(r&&/\d/.test(r)){let e=Number.isFinite(r)?r+"%":r;if(!Number.isFinite(r)&&r?.endsWith("%")){const t=1e12;e=Math.round(Number.parseFloat(r)*t)/t+"%"}i={flexBasis:e}}const s=t.useBlockProps.save({className:o,style:i}),c=t.useInnerBlocksProps.save(s);return(0,e.createElement)("div",c)}})})()})();