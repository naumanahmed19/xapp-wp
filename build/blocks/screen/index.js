!function(){var e={4184:function(e,t){var n;!function(){"use strict";var l={}.hasOwnProperty;function r(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var o=typeof n;if("string"===o||"number"===o)e.push(n);else if(Array.isArray(n)){if(n.length){var i=r.apply(null,n);i&&e.push(i)}}else if("object"===o){if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]")){e.push(n.toString());continue}for(var a in n)l.call(n,a)&&n[a]&&e.push(a)}}}return e.join(" ")}e.exports?(r.default=r,e.exports=r):void 0===(n=function(){return r}.apply(t,[]))||(e.exports=n)}()}},t={};function n(l){var r=t[l];if(void 0!==r)return r.exports;var o=t[l]={exports:{}};return e[l](o,o.exports,n),o.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var l in t)n.o(t,l)&&!n.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){"use strict";var e=window.wp.element,t=window.wp.blockEditor,l=window.wp.blocks,r=window.wp.data,o=n(4184),i=n.n(o),a=window.wp.components,c=window.wp.i18n,s=window.wp.primitives,u=(0,e.createElement)(s.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,e.createElement)(s.Path,{d:"M15 4H9c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h6c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm.5 14c0 .3-.2.5-.5.5H9c-.3 0-.5-.2-.5-.5V6c0-.3.2-.5.5-.5h6c.3 0 .5.2.5.5v12zm-4.5-.5h2V16h-2v1.5z"}));(0,l.registerBlockType)("xapp/screen",{icon:(0,e.createElement)((function({icon:t,size:n=24,...l}){return(0,e.cloneElement)(t,{width:n,height:n,...l})}),{icon:u,width:20}),__experimentalLabel(e,t){let{context:n}=t;if("list-view"===n&&e?.title)return e?.title},edit:function(n){const{attributes:l,setAttributes:o,clientId:s,blockId:u}=n,[d,p]=(0,e.useState)(!1),[m,v]=(0,e.useState)(null),[f,w]=(0,e.useState)("true"),[g,h]=(0,e.useState)(!1),b=()=>p(!0),{verticalAlignment:E,templateLock:k=!1,allowedBlocks:x,style:S,tabScreenIndex:B,scroll:y,title:_,screenId:C}=l,I=(0,t.__experimentalUseColorProps)(l),P=i()("block-core-columns",{[`is-vertically-aligned-${E}`]:E},y?"tab-screen":""),{columnsIds:A,hasChildBlocks:O,rootClientId:N}=((0,a.__experimentalUseCustomUnits)({availableUnits:(0,t.useSetting)("spacing.units")||["%","px","em","rem","vw"]}),(0,r.useSelect)((e=>{const{getBlockOrder:n,getBlockRootClientId:l}=e(t.store),r=l(s);return{hasChildBlocks:n(s).length>0,rootClientId:r,columnsIds:n(r)}}),[s])),{updateBlockAttributes:$}=(0,r.useDispatch)(t.store),j=(0,t.useBlockProps)({className:P,style:S,tabScreenIndex:B}),T=A.length,D=A.indexOf(s)+1,F=(0,c.sprintf)(/* translators: 1: Block label (i.e. "Block: Column"), 2: Position of the selected block, 3: Total number of sibling blocks of the same type */
(0,c.__)("%1$s (%2$d of %3$d)"),j["aria-label"],D,T),U=(0,t.useInnerBlocksProps)({...j,"aria-label":F,style:S},{templateLock:k,allowedBlocks:x,renderAppender:O?void 0:()=>(0,e.createElement)(t.InnerBlocks.ButtonBlockAppender,{className:"xapp-appender"})});return(0,e.useEffect)((()=>{C||o({screenId:u})}),[]),(0,e.useEffect)((()=>{if(!d)return;const e=wp.data.select("core/editor").getCurrentPostId(),t=window?.xapp?.siteUrl;let n=`${t}/wp-json/xapp/home?APP_POST_ID=${e}&screenId=${C}&preview=${f}`;h(!0),fetch(n).then((e=>e.json())).then((e=>{h(!1),v(e)}))}),[d]),(0,e.createElement)(e.Fragment,null,(0,e.createElement)(t.BlockControls,null,(0,e.createElement)(t.BlockVerticalAlignmentToolbar,{onChange:e=>{o({verticalAlignment:e}),$(N,{verticalAlignment:null})},value:E})),(0,e.createElement)(t.InspectorControls,null,(0,e.createElement)(a.PanelBody,{title:(0,c.__)("Screen settings")},(0,e.createElement)(a.TextControl,{label:(0,c.__)("Title","brand"),value:_,onChange:e=>{o({title:e})}}),(0,e.createElement)(a.TextControl,{label:(0,c.__)("Screen id","brand"),value:C,onChange:e=>{o({screenId:e})}}),(0,e.createElement)(a.ToggleControl,{label:(0,c.__)("Enable Scroll"),checked:y,onChange:e=>o({scroll:e})})),(0,e.createElement)(a.PanelBody,{title:(0,c.__)("Debug")},(0,e.createElement)(a.Button,{variant:"link",onClick:()=>{w("true"),b()}},"Preview Screen JSON Data"),(0,e.createElement)(a.Button,{variant:"link",onClick:()=>{w("false"),b()}},"Publish Screen JSON Data"),d&&(0,e.createElement)(a.Modal,{title:`${_} - Json`,onRequestClose:()=>p(!1)},g?(0,e.createElement)(a.Spinner,null):(0,e.createElement)(e.Fragment,null,(0,e.createElement)("code",null,(0,e.createElement)("pre",null,JSON.stringify(m,null,4)||"No data")))))),(0,e.createElement)("div",{style:{...I.style}},(0,e.createElement)("div",U)))},save:function(n){let{attributes:l}=n;const{verticalAlignment:r,width:o}=l,a=i()({[`is-vertically-aligned-${r}`]:r});let c;if(o&&/\d/.test(o)){let e=Number.isFinite(o)?o+"%":o;if(!Number.isFinite(o)&&o?.endsWith("%")){const t=1e12;e=Math.round(Number.parseFloat(o)*t)/t+"%"}c={flexBasis:e}}const s=t.useBlockProps.save({className:a,style:c}),u=t.useInnerBlocksProps.save(s);return(0,e.createElement)("div",u)}})}()}();