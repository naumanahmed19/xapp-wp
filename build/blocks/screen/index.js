(()=>{var e={3967:(e,t)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function l(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=a(e,o(n)))}return e}function o(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return l.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)r.call(e,n)&&e[n]&&(t=a(t,n));return t}function a(e,t){return t?e?e+" "+t:e+t:e}e.exports?(l.default=l,e.exports=l):void 0===(n=function(){return l}.apply(t,[]))||(e.exports=n)}()}},t={};function n(r){var l=t[r];if(void 0!==l)return l.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";const e=window.React,t=window.wp.blockEditor,r=window.wp.blocks,l=window.wp.data;var o=n(3967),a=n.n(o);const i=window.wp.components,c=window.wp.element,s=window.wp.i18n,u=(0,c.forwardRef)((function({icon:e,size:t=24,...n},r){return(0,c.cloneElement)(e,{width:t,height:t,...n,ref:r})})),d=window.wp.primitives,p=(0,e.createElement)(d.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,e.createElement)(d.Path,{d:"M15 4H9c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h6c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm.5 14c0 .3-.2.5-.5.5H9c-.3 0-.5-.2-.5-.5V6c0-.3.2-.5.5-.5h6c.3 0 .5.2.5.5v12zm-4.5-.5h2V16h-2v1.5z"}));(0,r.registerBlockType)("xapp/screen",{icon:(0,e.createElement)(u,{icon:p,width:20}),__experimentalLabel(e,{context:t}){if("list-view"===t&&e?.title)return e?.title},edit:function(n){const{attributes:r,setAttributes:o,clientId:u,blockId:d}=n,[p,m]=(0,c.useState)(!1),[v,w]=(0,c.useState)(null),[f,g]=(0,c.useState)("true"),[b,h]=(0,c.useState)(!1),E=()=>m(!0),{verticalAlignment:k,templateLock:x=!1,allowedBlocks:y,style:S,tabScreenIndex:B,scroll:_,title:C,screenId:I}=r,P=(0,t.__experimentalUseColorProps)(r),A=a()("block-core-columns",{[`is-vertically-aligned-${k}`]:k},_?"tab-screen":""),{columnsIds:O,hasChildBlocks:N,rootClientId:$}=((0,i.__experimentalUseCustomUnits)({availableUnits:(0,t.useSetting)("spacing.units")||["%","px","em","rem","vw"]}),(0,l.useSelect)((e=>{const{getBlockOrder:n,getBlockRootClientId:r}=e(t.store),l=r(u);return{hasChildBlocks:n(u).length>0,rootClientId:l,columnsIds:n(l)}}),[u])),{updateBlockAttributes:T}=(0,l.useDispatch)(t.store),j=(0,t.useBlockProps)({className:A,style:S,tabScreenIndex:B}),D=O.length,F=O.indexOf(u)+1,U=(0,s.sprintf)(/* translators: 1: Block label (i.e. "Block: Column"), 2: Position of the selected block, 3: Total number of sibling blocks of the same type */ /* translators: 1: Block label (i.e. "Block: Column"), 2: Position of the selected block, 3: Total number of sibling blocks of the same type */
(0,s.__)("%1$s (%2$d of %3$d)"),j["aria-label"],F,D),V=(0,t.useInnerBlocksProps)({...j,"aria-label":U,style:S},{templateLock:x,allowedBlocks:y,renderAppender:N?void 0:()=>(0,e.createElement)(t.InnerBlocks.ButtonBlockAppender,{className:"xapp-appender"})});return(0,c.useEffect)((()=>{I||o({screenId:d})}),[]),(0,c.useEffect)((()=>{if(!p)return;const e=wp.data.select("core/editor").getCurrentPostId(),t=window?.xapp?.siteUrl;let n=`${t}/wp-json/xapp/home?APP_POST_ID=${e}&screenId=${I}&preview=${f}`;h(!0),fetch(n).then((e=>e.json())).then((e=>{h(!1),w(e)}))}),[p]),(0,e.createElement)(e.Fragment,null,(0,e.createElement)(t.BlockControls,null,(0,e.createElement)(t.BlockVerticalAlignmentToolbar,{onChange:e=>{o({verticalAlignment:e}),T($,{verticalAlignment:null})},value:k})),(0,e.createElement)(t.InspectorControls,null,(0,e.createElement)(i.PanelBody,{title:(0,s.__)("Screen settings")},(0,e.createElement)(i.TextControl,{label:(0,s.__)("Title","brand"),value:C,onChange:e=>{o({title:e})}}),(0,e.createElement)(i.TextControl,{label:(0,s.__)("Screen id","brand"),value:I,onChange:e=>{o({screenId:e})}}),(0,e.createElement)(i.ToggleControl,{label:(0,s.__)("Enable Scroll"),checked:_,onChange:e=>o({scroll:e})})),(0,e.createElement)(i.PanelBody,{title:(0,s.__)("Debug")},(0,e.createElement)(i.Button,{variant:"link",onClick:()=>{g("true"),E()}},"Preview Screen JSON Data"),(0,e.createElement)(i.Button,{variant:"link",onClick:()=>{g("false"),E()}},"Publish Screen JSON Data"),p&&(0,e.createElement)(i.Modal,{title:`${C} - Json`,onRequestClose:()=>m(!1)},b?(0,e.createElement)(i.Spinner,null):(0,e.createElement)(e.Fragment,null,(0,e.createElement)("code",null,(0,e.createElement)("pre",null,JSON.stringify(v,null,4)||"No data")))))),(0,e.createElement)("div",{style:{...P.style}},(0,e.createElement)("div",{...V})))},save:function({attributes:n}){const{verticalAlignment:r,width:l}=n,o=a()({[`is-vertically-aligned-${r}`]:r});let i;if(l&&/\d/.test(l)){let e=Number.isFinite(l)?l+"%":l;if(!Number.isFinite(l)&&l?.endsWith("%")){const t=1e12;e=Math.round(Number.parseFloat(l)*t)/t+"%"}i={flexBasis:e}}const c=t.useBlockProps.save({className:o,style:i}),s=t.useInnerBlocksProps.save(c);return(0,e.createElement)("div",{...s})}})})()})();